schema_version: '0.3'
buildstock_directory: /home/epresent/resstock # Relative to this file or absolute
project_directory: project_national # Relative to buildstock_directory
output_directory: /projects/enduse/gmlc-bills/upload-test-aps
# weather_files_url: https://data.nrel.gov/system/files/156/BuildStock_TMY3_FIPS.zip
weather_files_path: /shared-projects/buildstock/weather/BuildStock_2019_FIPS.zip

sampler: 
  type: residential_quota_downselect
  args:
    n_datapoints: 10000
    logic:
      - Vacancy Status|Occupied
      - Geometry Building Type RECS|Single-Family Detached
      - or:
        - Heating Fuel|Electricity
        - Heating Fuel|Natural Gas
        - Heating Fuel|Propane
        - Heating Fuel|Fuel Oil
      - or:
        #APS
        - County|AZ, Gila County
        - County|AZ, La Paz County
        - County|AZ, Navajo County
        - County|AZ, Coconino County
        - County|AZ, Yavapai County
        - County|AZ, Maricopa County
        - County|AZ, Yuma County
        # #Ameren
        # - County|IL, Christian County
        # - County|IL, Shelby County
        # - County|IL, Crawford County
        # - County|IL, Clark County
        # - County|IL, Jasper County
        # - County|IL, Iroquois County
        # - County|IL, Effingham County
        # - County|IL, Richland County
        # - County|IL, Cumberland County
        # - County|IL, Greene County
        # - County|IL, Montgomery County
        # - County|IL, Lawrence County
        # - County|IL, Fayette County
        # - County|IL, Macoupin County
        # - County|IL, Kankakee County
        # - County|IL, Scott County
        # - County|IL, Putnam County
        # - County|IL, Coles County
        # - County|IL, Hardin County
        # - County|IL, Vermilion County
        # - County|IL, Knox County
        # - County|IL, Edwards County
        # - County|IL, LaSalle County
        # - County|IL, Schuyler County
        # - County|IL, Livingston County
        # - County|IL, Cass County
        # - County|IL, Randolph County
        # - County|IL, Clay County
        # - County|IL, White County
        # - County|IL, Ford County
        # - County|IL, Bond County
        # - County|IL, Marshall County
        # - County|IL, McDonough County
        # - County|IL, Gallatin County
        # - County|IL, Morgan County
        # - County|IL, Stark County
        # - County|IL, Wabash County
        # - County|IL, Calhoun County
        # - County|IL, Mason County
        # - County|IL, Bureau County
        # - County|IL, Pike County
        # - County|IL, Washington County
        # - County|IL, Pope County
        # - County|IL, Saline County
        # - County|IL, Logan County
        # - County|IL, Warren County
        # - County|IL, Edgar County
        # - County|IL, Fulton County
        # - County|IL, Wayne County
        # - County|IL, Brown County
        # - County|IL, Hamilton County
        # - County|IL, Pulaski County
        # - County|IL, Jersey County
        # - County|IL, Henry County
        # - County|IL, Woodford County
        # - County|IL, Union County
        # - County|IL, Douglas County
        # - County|IL, De Witt County
        # - County|IL, Clinton County
        # - County|IL, Johnson County
        # - County|IL, Perry County
        # - County|IL, Marion County
        # - County|IL, Mercer County
        # - County|IL, Moultrie County
        # - County|IL, Madison County
        # - County|IL, Alexander County
        # - County|IL, Franklin County
        # - County|IL, Monroe County
        # - County|IL, Hancock County
        # - County|IL, Menard County
        # - County|IL, Piatt County
        # - County|IL, Henderson County
        # - County|IL, Massac County
        # - County|IL, Tazewell County
        # - County|IL, Champaign County
        # - County|IL, St. Clair County
        # - County|IL, Adams County
        # - County|IL, Sangamon County
        # - County|IL, Peoria County
        # - County|IL, Macon County
        # - County|IL, Williamson County
        # - County|IL, McLean County
        # - County|IL, Jefferson County
        # - County|IL, Jackson County
        # #GMP
        # - County|VT, Bennington County
        # - County|VT, Caledonia County
        # - County|VT, Addison County
        # - County|VT, Grand Isle County
        # - County|VT, Windham County
        # - County|VT, Orange County
        # - County|VT, Windsor County
        # - County|VT, Rutland County
        # - County|VT, Washington County
        # - County|VT, Chittenden County
        # #OGE
        # - County|OK, Carter County
        # - County|OK, Marshall County
        # - County|OK, Johnston County
        # - County|OK, Murray County
        # - County|OK, Love County
        # - County|OK, Bryan County
        # - County|OK, Woods County
        # - County|OK, Pontotoc County
        # - County|OK, Dewey County
        # - County|OK, Garvin County
        # - County|OK, Seminole County
        # - County|OK, Muskogee County
        # - County|OK, Blaine County
        # - County|OK, Okmulgee County
        # - County|OK, Coal County
        # - County|OK, Lincoln County
        # - County|OK, McIntosh County
        # - County|OK, Alfalfa County
        # - County|OK, Kingfisher County
        # - County|OK, Major County
        # - County|OK, Creek County
        # - County|OK, Pottawatomie County
        # - County|OK, Le Flore County
        # - County|OK, Logan County
        # - County|OK, Woodward County
        # - County|OK, Sequoyah County
        # - County|OK, McClain County
        # - County|OK, Wagoner County
        # - County|OK, Grant County
        # - County|OK, Cleveland County
        # - County|OK, Oklahoma County
        # - County|OK, Canadian County
        # - County|OK, Tulsa County
        # - County|OK, Payne County
        # - County|OK, Garfield County
        # - County|OK, Ellis County
    resample: true


workflow_generator:
  type: residential_hpxml
  args:
    build_existing_model:
      simulation_control_timestep: 60
      simulation_control_run_period_begin_month: 1
      simulation_control_run_period_begin_day_of_month: 1
      simulation_control_run_period_end_month: 12
      simulation_control_run_period_end_day_of_month: 31
      simulation_control_run_period_calendar_year: 2018

    emissions:
      - scenario_name: LRMER_LowRECost_15
        type: CO2
        elec_folder: data/cambium/LRMER_LowRECost_15
        gas_value: 117.6
        propane_value: 136.6
        oil_value: 161.0
        wood_value: 200.0

    simulation_output_report:
      timeseries_frequency: hourly
      include_timeseries_fuel_consumptions: true
      include_timeseries_end_use_consumptions: true
      include_timeseries_emissions: true
      include_timeseries_total_loads: true

    reporting_measures:
      - measure_dir_name: QOIReport

    server_directory_cleanup:
      retain_in_idf: false
      retain_schedules_csv: false

baseline:
  n_buildings_represented: 136569411 # American Community Survey 2019 5-year, B25001, does not include AK, HI, and territories

upgrades:
  - upgrade_name: Package with Fuel Switching
    options:
      #ASHP for all homes with ducts
      - option: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF
        apply_logic: HVAC Has Ducts|Yes
        costs: &blank_costs
          - value: 0
            multiplier: Fixed (1)
        lifetime: 15
      #MSHP for all homes without ducts
      - option: HVAC Heating Efficiency|MSHP, SEER 25, 12.7 HSPF
        apply_logic: HVAC Has Ducts|No 
        costs: *blank_costs
        lifetime: 15
      #Duct sealing
      - &duct_sealing
        option: Ducts|10% Leakage, R-8
        apply_logic: 
          not: Ducts|10% Leakage, R-8
        costs: *blank_costs
        lifetime: 30
      #HPWHs for all
      - option: Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|1
              - Bedrooms|2
              - Bedrooms|3
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        costs: *blank_costs
        lifetime: 12
      - option: Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|4
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        costs: *blank_costs
        lifetime: 12
      - option: Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|5
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        costs: *blank_costs
        lifetime: 12
      # Clothes washer Upgrade
      - &clothes_washer_80pct
        option: Clothes Washer|EnergyStar, 80% Usage
        apply_logic: Clothes Washer|Standard, 80% Usage
        costs: *blank_costs
        lifetime: 14
      - &clothes_washer_100pct
        option: Clothes Washer|EnergyStar, 100% Usage
        apply_logic: Clothes Washer|Standard, 100% Usage
        costs: *blank_costs
        lifetime: 14
      - &clothes_washer_120pct
        option: Clothes Washer|EnergyStar, 120% Usage
        apply_logic: Clothes Washer|Standard, 120% Usage
        costs: *blank_costs
        lifetime: 14
      # Dishwasher Upgrade
      - &dishwasher_80pct
        option: Dishwasher|199 Rated kWh, 80% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 80% Usage
            - Dishwasher|318 Rated kWh, 80% Usage
        costs: *blank_costs
        lifetime: 11
      - &dishwasher_100pct
        option: Dishwasher|199 Rated kWh, 100% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 100% Usage
            - Dishwasher|318 Rated kWh, 100% Usage
        costs: *blank_costs
        lifetime: 11
      - &dishwasher_120pct
        option: Dishwasher|199 Rated kWh, 120% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 120% Usage
            - Dishwasher|318 Rated kWh, 120% Usage
        costs: *blank_costs
        lifetime: 11
      # Refrigerator Upgrade
      - &refrigerator
        option: Refrigerator|EF 21.9, 100% Usage
        apply_logic:
          not: Refrigerator|EF 21.9, 100% Usage
        costs: *blank_costs
        lifetime: 17.4
      # Clothes Dryer Upgrade
      - option: Clothes Dryer|Electric, EnergyStar 80% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 80% Usage
            - Clothes Dryer|Gas, 80% Usage
            - Clothes Dryer|Propane, 80% Usage
        costs: *blank_costs
        lifetime: 13
      - option: Clothes Dryer|Electric, EnergyStar 100% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 100% Usage
            - Clothes Dryer|Gas, 100% Usage
            - Clothes Dryer|Propane, 100% Usage
        costs: *blank_costs
        lifetime: 13
      - option: Clothes Dryer|Electric, EnergyStar 120% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 120% Usage
            - Clothes Dryer|Gas, 120% Usage
            - Clothes Dryer|Propane, 120% Usage
        costs: *blank_costs
        lifetime: 13
      - &cooking_range
        option: Cooking Range|Electric, Induction, 100% Usage
        apply_logic:
          not: Cooking Range|Electric, Induction, 100% Usage
        costs: *blank_costs
        lifetime: 999


  - upgrade_name: Package without Fuel Switching
    options:
      #If home has AC but non-electric heat, upgrade CAC to SEER 18, and room AC to EER 12
      - option: HVAC Cooling Efficiency|AC, SEER 18
        apply_logic:
          and:
            - or:
              - HVAC Cooling Efficiency|AC, SEER 8
              - HVAC Cooling Efficiency|AC, SEER 10
              - HVAC Cooling Efficiency|AC, SEER 13
              - HVAC Cooling Efficiency|AC, SEER 18
            - not: Heating Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 999
      - option: HVAC Cooling Efficiency|Room AC, EER 12.0
        apply_logic:
          and:
            - or:
              - HVAC Cooling Efficiency|Room AC, EER 8.5
              - HVAC Cooling Efficiency|Room AC, EER 9.8
              - HVAC Cooling Efficiency|Room AC, EER 10.7
            - not: Heating Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 999        
      #ASHP for all homes with ducts and electric heating
      - option: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF
        apply_logic: 
          and:
          - HVAC Has Ducts|Yes
          - Heating Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 15
      #MSHP for all homes with electric heating and no ducts
      - option: HVAC Heating Efficiency|MSHP, SEER 25, 12.7 HSPF
        apply_logic:
          and:
          - HVAC Has Ducts|No 
          - Heating Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 15
      - option: Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|1
              - Bedrooms|2
              - Bedrooms|3
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
            - Water Heater Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 12
      - option: Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|4
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
            - Water Heater Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 12
      - option: Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        apply_logic: 
          and:
            - or:
              - Bedrooms|5
            - not:
              - Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF
              - Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
              - Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
            - Water Heater Fuel|Electricity
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 12
      - *refrigerator
      - *clothes_washer_80pct
      - *clothes_washer_100pct
      - *clothes_washer_120pct
      # Clothes Dryer Upgrade
      - option: Clothes Dryer|Electric, EnergyStar 80% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 80% Usage
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 13
      - option: Clothes Dryer|Electric, EnergyStar 100% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 100% Usage
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 13
      - option: Clothes Dryer|Electric, EnergyStar 120% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 120% Usage
        costs:
          - value: 0
            multiplier: Fixed (1)
        lifetime: 13
      - *dishwasher_80pct
      - *dishwasher_100pct
      - *dishwasher_120pct
      - *cooking_range
  - upgrade_name: Envelope Package
    options:
      #Attic insulation - R-values for 2021 IECC for homes with vented attics
      - &R-30_attic_uninsulated
        option: Insulation Ceiling|R-30
        apply_logic:
          - and:
            - or: 
              - ASHRAE IECC Climate Zone 2004|1A
            - or: 
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
              - Insulation Ceiling|R-30
              - Insulation Ceiling|R-38
              - Insulation Ceiling|R-49
            - Geometry Attic Type|Vented Attic
        costs: *blank_costs
        lifetime: 999
      - &R-49_attic
        option: Insulation Ceiling|R-49
        apply_logic:
          - and: 
            - or: 
              - ASHRAE IECC Climate Zone 2004|2A
              - ASHRAE IECC Climate Zone 2004|2B
              - ASHRAE IECC Climate Zone 2004|3A
              - ASHRAE IECC Climate Zone 2004|3B
              - ASHRAE IECC Climate Zone 2004|3C
            - or: 
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
              - Insulation Ceiling|R-30
              - Insulation Ceiling|R-38
              - Insulation Ceiling|R-49
              - Geometry Attic Type|Vented Attic
        costs: *blank_costs
        lifetime: 999
      - &R-60_attic
        option: Insulation Ceiling|R-60
        apply_logic: 
          - and: 
            - or: 
              - ASHRAE IECC Climate Zone 2004|4A
              - ASHRAE IECC Climate Zone 2004|4B
              - ASHRAE IECC Climate Zone 2004|4C
              - ASHRAE IECC Climate Zone 2004|5A
              - ASHRAE IECC Climate Zone 2004|5B
              - ASHRAE IECC Climate Zone 2004|6A
              - ASHRAE IECC Climate Zone 2004|6B
              - ASHRAE IECC Climate Zone 2004|7A
              - ASHRAE IECC Climate Zone 2004|7B
            - or: 
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
              - Insulation Ceiling|R-30
              - Insulation Ceiling|R-38
              - Insulation Ceiling|R-49
            - Geometry Attic Type|Vented Attic
        costs: *blank_costs
        lifetime: 999
      #Add R-6 (polyiso) to homes older than 1990 with <R-19 nominal wall insulation
      - &polyiso_1inch_on_uninsulated_wood
        #1" polyiso continuous insulation, R-6.5, 19% whole home reduction in ACH50, $1.40 per sq ft exterior wall, for all homes older than 1990 with <R-19 wall insulation
        option: Insulation Wall|Wood Stud, Uninsulated, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Wood Stud, Uninsulated
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-7_wood
        option: Insulation Wall|Wood Stud, R-7, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Wood Stud, R-7
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-11_wood
        option: Insulation Wall|Wood Stud, R-11, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Wood Stud, R-11
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-13_wood
        option: Insulation Wall|Wood Stud, R-13, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Wood Stud, R-13
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-15_wood
        option: Insulation Wall|Wood Stud, R-15, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Wood Stud, R-15
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_uninsulated_cmu
        option: Insulation Wall|CMU, 6-in Hollow, Uninsulated, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|CMU, 6-in Hollow, Uninsulated
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-7_cmu
        option: Insulation Wall|CMU, 6-in Hollow, R-7, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|CMU, 6-in Hollow, R-7
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-11_cmu
        option: Insulation Wall|CMU, 6-in Hollow, R-11, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|CMU, 6-in Hollow, R-11
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-15_cmu
        option: Insulation Wall|CMU, 6-in Hollow, R-15, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|CMU, 6-in Hollow, R-15
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_uninsulated_brick
        option: Insulation Wall|Brick, 12-in, 3-wythe, Uninsulated, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Brick, 12-in, 3-wythe, Uninsulated
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-7_brick
        option: Insulation Wall|Brick, 12-in, 3-wythe, R-7, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Brick, 12-in, 3-wythe, R-7
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-11_brick
        option: Insulation Wall|Brick, 12-in, 3-wythe, R-11, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Brick, 12-in, 3-wythe, R-11
        costs:  *blank_costs
        lifetime: 30
      - &polyiso_1inch_on_R-15_brick
        option: Insulation Wall|Brick, 12-in, 3-wythe, R-15, R-6.5 Sheathing
        apply_logic:
          and:
            - Insulation Wall|Brick, 12-in, 3-wythe, R-15
        costs:  *blank_costs
        lifetime: 30
      #Add exterior low-E storms for single and double pane windows
      - &low-e_storms_on_single_clear_metal
        option: Windows|Single, Clear, Metal, Exterior Low-E Storm
        apply_logic:
          and:
            - or:
                - Windows|Single, Clear, Metal
                - Windows|Single, Clear, Metal, Exterior Clear Storm
        costs:  *blank_costs
        lifetime: 30
      - &low-e_storms_on_single_clear_nonmetal
        option: Windows|Single, Clear, Non-metal, Exterior Low-E Storm
        apply_logic:
          and:
            - or:
                - Windows|Single, Clear, Non-metal
                - Windows|Single, Clear, Non-metal, Exterior Clear Storm
        costs:  *blank_costs
        lifetime: 30
      - &low-e_storms_on_double_clear_metal
        option: Windows|Double, Clear, Metal, Exterior Low-E Storm
        apply_logic:
          and:
            - Windows|Double, Clear, Metal, Air
        costs:  *blank_costs
        lifetime: 30
      #Non-vented crawlspace air leakage reductions
      #19% for 1" polyiso
      - option: Infiltration Reduction|19%
        apply_logic:
          - and:
            - not: &vented_crawlspace
              - Geometry Foundation Type|Vented Crawlspace
            - not: &walls_ineligible_R-19
              - Insulation Wall|Wood Stud, R-19
              - Insulation Wall|CMU, 6-in Hollow, R-19
              - Insulation Wall|Brick, 12-in, 3-wythe, R-19
            - not: &upgradable_single_pane
              - Windows|Single, Clear, Metal
              - Windows|Single, Clear, Non-metal
            - not: &upgradable_double_pane_or_single_and_storm
              - Windows|Single, Clear, Metal, Exterior Clear Storm
              - Windows|Single, Clear, Non-metal, Exterior Clear Storm
              - Windows|Double, Clear, Metal, Air
            - not: &R-30_attic_eligible
              - and:
                - or: 
                  - ASHRAE IECC Climate Zone 2004|1A
                - or: 
                  - Insulation Ceiling|Uninsulated
                  - Insulation Ceiling|R-7
                  - Insulation Ceiling|R-13
                  - Insulation Ceiling|R-19
                  - Insulation Ceiling|R-30
                  - Insulation Ceiling|R-38
                  - Insulation Ceiling|R-49
                - Geometry Attic Type|Vented Attic
            - not: &R-49_attic_eligible
              - and: 
                - or: 
                  - ASHRAE IECC Climate Zone 2004|2A
                  - ASHRAE IECC Climate Zone 2004|2B
                  - ASHRAE IECC Climate Zone 2004|3A
                  - ASHRAE IECC Climate Zone 2004|3B
                  - ASHRAE IECC Climate Zone 2004|3C
                - or: 
                  - Insulation Ceiling|Uninsulated
                  - Insulation Ceiling|R-7
                  - Insulation Ceiling|R-13
                  - Insulation Ceiling|R-19
                  - Insulation Ceiling|R-30
                  - Insulation Ceiling|R-38
                  - Insulation Ceiling|R-49
                - Geometry Attic Type|Vented Attic
            - not: &R-60_attic_eligible
              - and: 
                - or: 
                  - ASHRAE IECC Climate Zone 2004|4A
                  - ASHRAE IECC Climate Zone 2004|4B
                  - ASHRAE IECC Climate Zone 2004|4C
                  - ASHRAE IECC Climate Zone 2004|5A
                  - ASHRAE IECC Climate Zone 2004|5B
                  - ASHRAE IECC Climate Zone 2004|6A
                  - ASHRAE IECC Climate Zone 2004|6B
                  - ASHRAE IECC Climate Zone 2004|7A
                  - ASHRAE IECC Climate Zone 2004|7B
                - or: 
                  - Insulation Ceiling|Uninsulated
                  - Insulation Ceiling|R-7
                  - Insulation Ceiling|R-13
                  - Insulation Ceiling|R-19
                  - Insulation Ceiling|R-30
                  - Insulation Ceiling|R-38
                  - Insulation Ceiling|R-49
                - Geometry Attic Type|Vented Attic
        costs: *blank_costs
        lifetime: 999
      #30% for exterior storms on single pane
      - option: Infiltration Reduction|30%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #10% for exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|10%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #13% for attic insulation
      - option: Infiltration Reduction|13%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #43.3% for 1" polyiso and exterior storms on single pane
      - option: Infiltration Reduction|43.3%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - not: *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #27.1% for 1" polyiso and exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|27.1%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #39.1% for attic insulation and exterior storms on single pane
      - option: Infiltration Reduction|39.1%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #21.7% for attic insulation and exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|21.7%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #29.5% for atiic insulation and 1" polyiso
      - option: Infiltration Reduction|29.5%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #50.7% for attic insulation and 1" polyiso and exterior storms on single pane
      - option: Infiltration Reduction|50.7%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - not: *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #36.6% for attic insulation and 1" polyiso and exterior clear storms on double pane or single pane + storm
      - option: Infiltration Reduction|36.6%
        apply_logic:
          - and:
            - not: *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #vented crawlspace air leakage reductions
      #13% for 1" polyiso
      - option: Infiltration Reduction|13%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #10% for exterior storms on single pane
      - option: Infiltration Reduction|10%
        apply_logic:
          - and:
            - *vented_crawlspace
            - *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #7% for exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|7%
        apply_logic:
          - and:
            - *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #8% for attic insulation
      - option: Infiltration Reduction|8%
        apply_logic:
          - and:
            - *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #31.3% for 1" polyiso and exterior storms on single pane
      - option: Infiltration Reduction|31.3%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #19.1% for 1" polyiso and exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|19.1%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - not: *R-30_attic_eligible
            - not: *R-49_attic_eligible
            - not: *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #27.3% for attic insulation and exterior storms on single pane
      - option: Infiltration Reduction|27.3%
        apply_logic:
          - and:
            - *vented_crawlspace
            - *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #14.4% for attic insulation and exterior storms on double pane or single pane + storm
      - option: Infiltration Reduction|14.4%
        apply_logic:
          - and:
            - *vented_crawlspace
            - *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #20.0% for atiic insulation and 1" polyiso
      - option: Infiltration Reduction|20.0%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #36.8% for attic insulation and 1" polyiso and exterior storms on single pane
      - option: Infiltration Reduction|36.8%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - *upgradable_single_pane
            - not: *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999
      #25.6% for attic insulation and 1" polyiso and exterior clear storms on double pane or single pane + storm
      - option: Infiltration Reduction|25.6%
        apply_logic:
          - and:
            - *vented_crawlspace
            - not: *walls_ineligible_R-19
            - not: *upgradable_single_pane
            - *upgradable_double_pane_or_single_and_storm
            - or:
              - *R-30_attic_eligible
              - *R-49_attic_eligible
              - *R-60_attic_eligible
        costs: *blank_costs
        lifetime: 999


  - upgrade_name: Lighting
      # Lighting Upgrade
      - &lighting
        option: Lighting|100% LED
        apply_logic:
          or:
            - Lighting|100% Incandescent
            - Lighting|60% CFL
            - Lighting|100% CFL
            - Lighting|20% LED
            - Lighting|100% LED
        costs:
          - value: 0
            multiplier: Floor Area, Lighting (ft^2)
        lifetime: 78.28


eagle:
  n_jobs: 50
  minutes_per_sim: 30
  account: enduse
  postprocessing:
    time: 480
    n_workers: 32
  sampling:
    time: 60

postprocessing:
  aws:
    region_name: 'us-west-2'
    s3:
      bucket: resstock-gmlc-bills-lbnl #change this to an NREL bucket if needed for testing
      prefix: upload-test-aps #the folder within whatever bucket, should be specific to the run, can be in heirarchy (like GMLC/APS) in which case only the last part will be used by the athena database namer
    athena:
      glue_service_role: service-role/AWSGlueServiceRole-default
      database_name: resstock-gmlc #collection of Athena tables (post-crawling), can be constant for the entire analysis
      max_crawling_time: 1200 #time to wait for the crawler to complete before aborting it